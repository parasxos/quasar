name: Deploy documentation

on:
  release:
    types: [ published ]
  push:
    branches:
      - master

jobs:

  build_deploy:
    name: Build and deploy documentation

    runs-on: self-hosted

    steps:

    - uses: actions/checkout@v3

    - name: Define version name
      run: |
        if [ ${{ startsWith(github.ref_name, 'dev') }} = true ]; then
          echo "VERSION_NAME=${{ github.ref_name }}" >> "$GITHUB_ENV"
        elif [ ${{ github.event.release.tag_name != '' }} = true ]; then
          echo "VERSION_NAME=version/${{ github.event.release.tag_name }}" >> "$GITHUB_ENV"
        else
          echo "VERSION_NAME=latest" >> "$GITHUB_ENV"
        fi
        echo ${{ github.ref_name }}
